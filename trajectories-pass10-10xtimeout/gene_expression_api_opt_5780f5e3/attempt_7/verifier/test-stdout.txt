F                                                                        [100%]
=================================== FAILURES ===================================
___________________ test_notebook_execution_time_and_output ____________________

    def test_notebook_execution_time_and_output():
        notebook_path = '/home/user/fetch_data.ipynb'
        output_notebook_path = '/home/user/fetch_data_out.ipynb'
        output_csv_path = '/home/user/expression_data.csv'
    
        # Remove output CSV if it exists to ensure we are testing the new run
        if os.path.exists(output_csv_path):
            os.remove(output_csv_path)
    
        start_time = time.time()
    
        # Execute the notebook
        result = subprocess.run(
            [
                'jupyter', 'nbconvert',
                '--to', 'notebook',
                '--execute', notebook_path,
                '--output', output_notebook_path
            ],
            capture_output=True,
            text=True
        )
    
        duration = time.time() - start_time
    
        # Ensure notebook executed successfully
        assert result.returncode == 0, f"Notebook execution failed: {result.stderr}"
    
        # Check duration (optimized version should be much faster than 10s, requirement is < 4s execution,
        # but allowing up to 6.0s for nbconvert overhead to be safe)
>       assert duration < 6.0, f"Notebook execution took {duration:.2f}s, which is too slow. Expected < 4s (with some nbconvert overhead). Did you use parallel execution?"
E       AssertionError: Notebook execution took 7.00s, which is too slow. Expected < 4s (with some nbconvert overhead). Did you use parallel execution?
E       assert 7.000103712081909 < 6.0

test.py:37: AssertionError
=========================== short test summary info ============================
FAILED test.py::test_notebook_execution_time_and_output - AssertionError: Not...
1 failed in 7.02s
