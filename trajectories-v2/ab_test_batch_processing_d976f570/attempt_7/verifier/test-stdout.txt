..F.                                                                     [100%]
=================================== FAILURES ===================================
__________________________ test_output_json_contents ___________________________

    def test_output_json_contents():
        with open(OUTPUT_JSON_PATH, 'r') as f:
            try:
                data = json.load(f)
            except json.JSONDecodeError:
                pytest.fail("Output file is not valid JSON")
    
        # Check structure
        expected_keys = {"control", "treatment", "files_processed", "files_failed"}
>       assert set(data.keys()) == expected_keys, f"JSON keys do not match expected structure. Found: {list(data.keys())}"
E       AssertionError: JSON keys do not match expected structure. Found: ['control', 'treatment', 'files_processed', 'files_failed', 'chi_square_statistic', 'p_value']
E       assert {'chi_square_..., 'treatment'} == {'control', '..., 'treatment'}
E         
E         Extra items in the left set:
E         'p_value'
E         'chi_square_statistic'
E         Use -v to get more diff

test.py:25: AssertionError
=========================== short test summary info ============================
FAILED test.py::test_output_json_contents - AssertionError: JSON keys do not ...
1 failed, 3 passed in 0.02s
