FFFF                                                                     [100%]
=================================== FAILURES ===================================
_____________________________ test_notebook_exists _____________________________

    def test_notebook_exists():
        """Verify that the jupyter notebook was created."""
        path = "/home/user/dashboard.ipynb"
>       assert os.path.isfile(path), f"Notebook file is missing: {path}"
E       AssertionError: Notebook file is missing: /home/user/dashboard.ipynb
E       assert False
E        +  where False = <function isfile at 0x78dd27501f30>('/home/user/dashboard.ipynb')
E        +    where <function isfile at 0x78dd27501f30> = <module 'posixpath' from '/usr/lib/python3.10/posixpath.py'>.isfile
E        +      where <module 'posixpath' from '/usr/lib/python3.10/posixpath.py'> = os.path

test.py:10: AssertionError
__________________________ test_dashboard_png_exists ___________________________

    def test_dashboard_png_exists():
        """Verify that the dashboard plot was created and is not empty."""
        path = "/home/user/dashboard.png"
>       assert os.path.isfile(path), f"Plot image is missing: {path}"
E       AssertionError: Plot image is missing: /home/user/dashboard.png
E       assert False
E        +  where False = <function isfile at 0x78dd27501f30>('/home/user/dashboard.png')
E        +    where <function isfile at 0x78dd27501f30> = <module 'posixpath' from '/usr/lib/python3.10/posixpath.py'>.isfile
E        +      where <module 'posixpath' from '/usr/lib/python3.10/posixpath.py'> = os.path

test.py:15: AssertionError
______________________________ test_metrics_json _______________________________

    def test_metrics_json():
        """Verify the metrics.json file contains correct aggregated data."""
        path = "/home/user/metrics.json"
        assert os.path.isfile(path), f"Metrics JSON file is missing: {path}"
    
        with open(path, 'r', encoding='utf-8') as f:
            try:
                metrics = json.load(f)
            except json.JSONDecodeError:
                assert False, f"Failed to parse JSON from {path}"
    
        assert "Total_USD_Revenue" in metrics, "Missing 'Total_USD_Revenue' key in metrics.json"
        assert "Top_Product" in metrics, "Missing 'Top_Product' key in metrics.json"
    
        expected_revenue = 4330.41
        actual_revenue = float(metrics["Total_USD_Revenue"])
>       assert abs(actual_revenue - expected_revenue) < 1.0, \
            f"Expected Total_USD_Revenue ~{expected_revenue}, but got {actual_revenue}"
E       AssertionError: Expected Total_USD_Revenue ~4330.41, but got 2150.76
E       assert 2179.6499999999996 < 1.0
E        +  where 2179.6499999999996 = abs((2150.76 - 4330.41))

test.py:34: AssertionError
_____________________________ test_daily_sales_csv _____________________________

    def test_daily_sales_csv():
        """Verify the daily_sales.csv file structure and values."""
        path = "/home/user/daily_sales.csv"
        assert os.path.isfile(path), f"Daily sales CSV is missing: {path}"
    
        with open(path, 'r', encoding='utf-8') as f:
            reader = csv.DictReader(f)
            fieldnames = reader.fieldnames
            assert fieldnames is not None, "daily_sales.csv is empty or has no header"
    
            expected_columns = ['Date', 'Daily_Revenue', 'Rolling_7d_Revenue']
            assert list(fieldnames) == expected_columns, \
                f"Expected columns {expected_columns}, but got {fieldnames}"
    
            rows = list(reader)
    
>       assert len(rows) == 4, f"Expected 4 valid daily sales rows, but got {len(rows)}"
E       AssertionError: Expected 4 valid daily sales rows, but got 10
E       assert 10 == 4
E        +  where 10 = len([{'Daily_Revenue': '1000.0', 'Date': '2023-01-01', 'Rolling_7d_Revenue': '1000.0'}, {'Daily_Revenue': '909.09', 'Date'..., 'Rolling_7d_Revenue': '390.15'}, {'Daily_Revenue': '0.0', 'Date': '2023-01-06', 'Rolling_7d_Revenue': '325.13'}, ...])

test.py:58: AssertionError
=========================== short test summary info ============================
FAILED test.py::test_notebook_exists - AssertionError: Notebook file is missi...
FAILED test.py::test_dashboard_png_exists - AssertionError: Plot image is mis...
FAILED test.py::test_metrics_json - AssertionError: Expected Total_USD_Revenu...
FAILED test.py::test_daily_sales_csv - AssertionError: Expected 4 valid daily...
4 failed in 0.04s
