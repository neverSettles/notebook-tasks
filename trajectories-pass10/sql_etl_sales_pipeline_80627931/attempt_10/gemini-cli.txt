YOLO mode is enabled. All tool calls will be automatically approved.
YOLO mode is enabled. All tool calls will be automatically approved.
I'll create the Jupyter Notebook file with the required ETL steps, including the SQLite `RANK()` window function as requested.

I have created the Jupyter Notebook at `/home/user/etl_pipeline.ipynb` that contains the complete ETL pipeline. 

The notebook handles:
1. Importing the `pandas` and `sqlite3` libraries.
2. Loading the raw sales data into a pandas DataFrame.
3. Creating the in-memory SQLite database and writing the data to the `sales` table.
4. Executing the required SQL query using the `RANK() OVER(ORDER BY SUM(amount) DESC)` window function to calculate the metrics.
5. Exporting exactly the three requested columns (`region`, `total_revenue`, `sales_rank`) into `/home/user/clean_sales.csv` without the pandas index.

It is formatted correctly and ready to be run cleanly from top to bottom by the automated test suite.
