.F.                                                                      [100%]
=================================== FAILURES ===================================
_______________________ test_output_csv_exists_and_valid _______________________

    def test_output_csv_exists_and_valid():
        csv_path = '/home/user/final_sales_summary.csv'
        assert os.path.exists(csv_path), f"The output CSV {csv_path} was not found"
    
        with open(csv_path, 'r', encoding='utf-8') as f:
            reader = csv.DictReader(f)
            headers = reader.fieldnames
            assert headers is not None, "CSV is empty or missing headers"
            assert 'category' in headers, "CSV missing 'category' column"
            assert 'discounted_price' in headers, "CSV missing 'discounted_price' column"
    
            rows = list(reader)
>           assert len(rows) == 3, f"Expected 3 categories in the summary CSV, but found {len(rows)}"
E           AssertionError: Expected 3 categories in the summary CSV, but found 4
E           assert 4 == 3
E            +  where 4 = len([{'category': 'Books', 'discounted_price': '5993.8815659965185'}, {'category': 'Clothing', 'discounted_price': '4476.4...'Electronics', 'discounted_price': '3916.955186144968'}, {'category': 'Home', 'discounted_price': '4062.696941522925'}])

test.py:22: AssertionError
=========================== short test summary info ============================
FAILED test.py::test_output_csv_exists_and_valid - AssertionError: Expected 3...
1 failed, 2 passed in 0.03s
