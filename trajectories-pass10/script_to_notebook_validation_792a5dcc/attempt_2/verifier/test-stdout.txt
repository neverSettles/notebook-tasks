.F.                                                                      [100%]
=================================== FAILURES ===================================
_______________________ test_output_csv_exists_and_valid _______________________

    def test_output_csv_exists_and_valid():
        csv_path = '/home/user/final_sales_summary.csv'
        assert os.path.exists(csv_path), f"The output CSV {csv_path} was not found"
    
        with open(csv_path, 'r', encoding='utf-8') as f:
            reader = csv.DictReader(f)
            headers = reader.fieldnames
            assert headers is not None, "CSV is empty or missing headers"
            assert 'category' in headers, "CSV missing 'category' column"
            assert 'discounted_price' in headers, "CSV missing 'discounted_price' column"
    
            rows = list(reader)
>           assert len(rows) == 3, f"Expected 3 categories in the summary CSV, but found {len(rows)}"
E           AssertionError: Expected 3 categories in the summary CSV, but found 4
E           assert 4 == 3
E            +  where 4 = len([{'category': 'Clothing', 'discounted_price': '8850.215239546442'}, {'category': 'Electronics', 'discounted_price': '7...e & Kitchen', 'discounted_price': '8032.199362445481'}, {'category': 'Toys', 'discounted_price': '11882.221346690909'}])

test.py:22: AssertionError
=========================== short test summary info ============================
FAILED test.py::test_output_csv_exists_and_valid - AssertionError: Expected 3...
1 failed, 2 passed in 0.02s
