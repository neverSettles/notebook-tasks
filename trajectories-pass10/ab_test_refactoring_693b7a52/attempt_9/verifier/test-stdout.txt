..F                                                                      [100%]
=================================== FAILURES ===================================
______________________________ test_output_files _______________________________

    def test_output_files():
        """Test that the correct output files are generated with expected content."""
        png_path = '/home/user/conversion_plot.png'
        csv_path = '/home/user/summary_stats.csv'
    
        assert os.path.isfile(png_path), f"Expected plot image {png_path} is missing."
        with open(png_path, 'rb') as f:
            header = f.read(8)
            assert header.startswith(b'\x89PNG\r\n\x1a\n'), f"File {png_path} is not a valid PNG."
    
        assert os.path.isfile(csv_path), f"Expected summary CSV {csv_path} is missing."
        with open(csv_path, 'r', encoding='utf-8') as f:
            reader = csv.DictReader(f)
            rows = list(reader)
    
        assert len(rows) == 2, f"Expected 2 rows of data in {csv_path}, found {len(rows)}."
    
        # Check control group
        control = next((r for r in rows if r.get('group') == 'control'), None)
>       assert control is not None, "Missing 'control' group in summary stats."
E       AssertionError: Missing 'control' group in summary stats.
E       assert None is not None

test.py:61: AssertionError
=========================== short test summary info ============================
FAILED test.py::test_output_files - AssertionError: Missing 'control' group i...
1 failed, 2 passed in 3.87s
